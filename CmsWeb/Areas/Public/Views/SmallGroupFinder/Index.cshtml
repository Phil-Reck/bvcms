@using CmsWeb.Areas.Public.Models;
@model CmsWeb.Areas.Public.Models.SmallGroupFinderModel
@{
    var st = Model.getSetting("SubmitText");
    var ts = Model.getSetting("TextSize");
    var ff = Model.getSetting("FontFamily");

    var bc = Model.getSetting("BGColor");
    var fc = Model.getSetting("FGColor");
    var sh = Model.getSetting("ShowHeaders");

    var SubmitText = st != null ? st.value : "Find Groups";
    var FontFamily = ff != null ? ff.value : "Verdana,Arial,Helvetica,sans-serif";
    var TextSize = ts != null ? ts.value : "12";
    var BGColor = bc != null ? bc.value : "#FFFFFF";
    var FGColor = fc != null ? fc.value : "#000000";
    var ShowHeaders = sh != null ? bool.Parse(sh.value) : false;

    var GroupsFound = Model.getGroups().Organizations;
}
<!DOCTYPE html>
<html lang="@System.Globalization.CultureInfo.CurrentUICulture.Name">
<head>
    <title>Small Group Finder</title>
    <link rel="shortcut icon" href="@Url.Content("~/favicon.ico?v=4")">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="robots" content="noindex" />
    <meta name="viewport" content="width=device-width, maximum-scale=1.0">
    @ViewExtensions2.GoogleFonts()
    @ViewExtensions2.FontAwesome()
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <style type="text/css">
        body {
            font-size: @(TextSize)px;
            font-family: @(FontFamily);
            background-color: @(BGColor);
            color: @(FGColor);
        }

        input {
            font-size: @(TextSize)px;
            font-family: @(FontFamily);
        }

        select {
            font-size: @(TextSize)px;
            font-family: @(FontFamily);
        }

        .search {
            padding:1px 5px 1px 5px;
        }

        .right {
            text-align: right;
        }

        .left {
            text-align: left;
        }

        .center {
            text-align: center;
        }

        .top {
            vertical-align: top;
        }

        .nowrap {
            white-space: nowrap;
        }

        .submit {
            padding-top:10px;
        }
        select {
          width: 12em;
        }
    </style>
</head>
<body>
    <!--
    Setting Count: @Model.getCount( SmallGroupFinderModel.TYPE_SETTING )<br />
    Filter Count: @Model.getCount( SmallGroupFinderModel.TYPE_FILTER )<br />
    <br />
    -->
    <table width="100%">
        <tbody>
            <tr>
                <td width="1%" class="nowrap center top">
                    @if (ShowHeaders)
                    {
                        <text>Select Group Options</text>
                        <hr />
                    }
                    <div class="search">
                        <form method="post">
                            <table width="100%">
                                @for (var iX = 0; iX < Model.getCount(SmallGroupFinderModel.TYPE_FILTER); iX++)
                                {
                                    var f = Model.getFilter(iX);
                                    var fi = Model.getFilterItems(iX);

                                    <tr>
                                        <td class="right nowrap">@(f.title + ":")</td>
                                        <td class="left">
                                            <select name="@f.name">
                                                @foreach (var item in fi)
                                                {
                                                    <option @(Model.IsSelectedValue(f.name, item.value) ? "selected" : "") value="@item.value">@item.value</option>
                                                }
                                            </select>
                                        </td>
                                    </tr>
                                }
                                <tr>
                                    <td colspan="2" class="center submit">
                                        <input type="submit" value="@(SubmitText)" />
                                    </td>
                                </tr>
                            </table>
                        </form>
                    </div>
                    <div>
                        @Html.Raw(Model.getGutter())
                    </div>
                </td>
                <td width="99%" class="top">
                    @if (ShowHeaders)
                    {
                        <text>Search Results - </text>@(GroupsFound.Count())<text> Group(s) Found</text>
                        <hr />
                    }
                    @foreach (var group in GroupsFound)
                    {
                        GroupLookup gl = new GroupLookup();
                        gl.populateFromOrg(group);
                        @Html.Raw(Model.replaceAndWrite(gl));
                    }
                </td>
            </tr>
        </tbody>
    </table>
</body>
</html>
